CAP理论
====
### 讨论范畴
CAP理论是在有状态（涉及到数据存储）的分布式系统范围内讨论的。对于各个节点无状态分布式系统，一般没有说CAP理论的。

### CAP的定义
#### C：一致性
一致性指的是客户端无论访问系统中的哪个节点，得到的结果是相同的；或者理解为系统中各个节点的对外状态是相同的；<br>
强一致性：任何时间点，系统中各个节点状态对外是一致的；或者说客户端在任何时间点，访问不同节点得到的结果相同；<br>
弱一致性：系统状态更新时，可能有一段时间，不同节点对外状态不一致，即客户端访问不同节点，得到的结果不同；但一段时间之后，本次更新的状态会在各个节点中保持一致。<br>
最终一致性：是弱一致性的一个特例，系统会保证在一定时间内，能够达到一个数据一致的状态。

#### A：可用性
可用性指的是系统服务能正常运行所占的时间百分比。最理想的情况可用性为100%

实际上没有100%可用的系统，不同业务场景对可用性的要求也不同，一般为99.9% 或 99.99%；<br>
系统不可用状态一般是发生在节点宕机的情况下，所以提高系统的可用性一般是考虑在某些节点宕机的情况下，如何保证系统仍然对外提供服务；

#### P：分区容错性
分区容错性指的是发生网络隔离，节点之间通信异常，但节点可能仍然有对外的服务能力，在这种情况下，系统可以保证继续对外服务，即保证可用性；但可能会出现不一致性（因为网络隔离，所以状态更新后不能同步）。

P 与 A的区别在于，A考虑的是节点不可用（比如机器宕机），而P考虑的是网络隔离；

### 为什么三个不能同时满足


### 小结
对于CAP这三个特性，应该是定量的去看待，而不是绝对的去保证，虽然可能可以证明在舍弃某个特性时，可以保证其他两个特性，但大部分系统都是在三者之间进行权衡，而不是完全抛弃某个特性。

### 常见分布式系统的CAP特性分析
#### Hadoop

#### Hbase

#### zookeeper

#### kafka

#### elasticSearch
